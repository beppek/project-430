<div ng-controller="challengesCtrl" class="">
    <div class="toolbar">
        Challenges |
        <span ng-if="isAuthenticated()"> <a ui-sref="createChallenge"><i class="fi-plus"></i> Create</a> |</span>
        Sort by:
        <a ng-click="sortByVotes()">Votes</a> / <a ng-click="sortByContributions()">Contributions</a> / <a ng-click="sortByDate()">Date</a>
    </div>

    <div ng-click="toChallenge(challenge)" ng-repeat="challenge in challenges" class="row challenge">
        <div class="medium-12 columns">

            <h3>{{challenge.title}}</h3>
            <div ng-if="isAuthenticated()">
                <a ng-if="!hasVoted(challenge)" ng-click="vote(challenge); $event.stopPropagation();"><i class="fi-arrow-up voteBtn"></i></a>
                <a ng-if="hasVoted(challenge)" ng-click="unVote(challenge); $event.stopPropagation();" class="hasVoted"><i class="fi-arrow-up voteBtn"></i></a>
                {{challenge.stats.votes.length}}
            </div>
            <div ng-if="!isAuthenticated()">
                <i class="fi-arrow-up"></i>
                {{challenge.stats.votes.length}}
            </div>
            <p>{{challenge.description}}</p>
            <p>Contributions: {{challenge.stats.contributions.length}}</p>
            <p>Created by: {{challenge.createdBy.createdByName}}</p>

        </div>
    </div>

</div>
